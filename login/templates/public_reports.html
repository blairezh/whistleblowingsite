<!DOCTYPE html>
<html lang="en">
{% load socialaccount %}
{% include 'login/user_navbar.html' %}

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reports</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <style>
    @media (max-width: 1085px) {
      .body {
        margin-right: -100px;
      }

      .row.row-cols-1.g-4 {
        width: 100%;
        justify-content: center;
        left: 0;
        right: 0;
        margin: 0 auto;
      }

      .col {
        width: 100% !important;
        margin: 1vw 0;
      }

      .card,
      .card-body,
      .row {
        width: calc(2 * 44.5vw - 40px) !important;
      }

      .summary,
      .details {
        width: calc(88vw - 65px) !important;
      }

      .expandcollapse {
        width: calc(88vw - 65px) !important;
      }

      .information {
        width: calc(88vw - 65px) !important;
      }

      .submit_status_and_update,
      .submit_status_and_update_box,
      .quickinfo {
        width: 40vw !important;
        height: 30vh;
      }

      .edit,
      .delete {
        width: 19vw !important;
      }

      .rating_email {
        width: max(10vw, 20vh);
        height: max(10vw, 20vh);
      }

      .private {
        width: min(15vw, 30vh);
        height: min(15vw, 30vh);
      }

      #ReportDetails,
      #display,
      #ExpandCollapse,
      #arrowImage {
        width: calc(2 * 40.5vw) !important;
      }
    }
  </style>
</head>

<body style="background-color: rgb(224, 122, 95); margin-top: 120px; height: auto;">
  <div style="background-color: rgb(242, 204, 143); padding: 5px; border-radius: 5px; width: calc(91vw - 36px); margin: 0 auto; height: 40px; margin-bottom: -35px;">
    <form method="post" style="display: flex; align-items: center; width: 100%;">
      {% csrf_token %}
      <div style="margin-right: 5px; width: 15%;">
        <input type="submit" id="search_button" name="search_button" value="reset" style="width: 100%; border: none; border-radius: 3px; background-color: rgb(224, 122, 95); color: white; cursor: pointer;">
      </div>
      <div style="flex: 1;">
        <input type="text" id="search" name="search" style="width: 100%; height: 30px; border: 0px; border-radius: 3px;">
      </div>
      <div style="margin-left: 5px; width: 15%;">
        <input type="submit" id="search_button" name="search_button" value="search" style="width: 100%; border: none; border-radius: 3px; background-color: rgb(129, 178, 154); color: white; cursor: pointer;">
      </div>
    </form>
  </div>

  <div class="container mt-5">
    <div class="row row-cols-1 g-4" style="width: 100vw; position: absolute; justify-content: center; left: 0; right: 0; margin: 0 auto;">
      {% for report in reports %}
      <div class="col" style="width: calc(44.5vw - 18px); margin: 1vw;">
        <div class="card" id="report_card{{report.id}}"
          style="margin-left: -12px; width: calc(44.5vw - 20px); height: auto; background-color: rgb(242, 204, 143); border: 0px;">
          <div class="card-body">
            <div class="summary"
              style="width: 40.5vw; height: auto; padding-top: 5px; padding-bottom: 5px; border-radius: 5px; background-color: #f0f0f0; text-align: center; align-items: center; padding-top: 8px; margin-bottom: 1vh;">
              <strong>{{ report.studentName.capitalize }}</strong> was reported for their work in <strong>{{report.className }}</strong> taught by <strong>{{ report.professorName.capitalize}}</strong><br>
            </div>

            <div style="display: flex; width: 40vw; height: 40vh; margin-bottom: 1vh;" class="information">
              <div class="quickinfo"
                style="width: 49%; height: 95%; display: inline-block; margin-right: 10px; margin-top: 3.9px; background-color: #f0f0f0; border-radius: 5px;">
              </div>

              <div style="width: 20vw; display: inline-block; height: 15vh; margin-right: -5px;"
                class="submit_status_and_update">
                <div style="display: flex; justify-content: space-around; align-items: center; height: 15vh;"
                  class="submit_status_and_update_box">
                  {% if report.rating.capitalize == "Positive" %}
                  <img class="rating_email" style="rotate: 90deg; width: auto; height: 8vh;"
                    src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhD2a2uzprPRdusoiSCTdrF5I6j5T_nY4FD-PU4e62iy0B77leCdAAiBhAcwa5R_p40HiDPkoX0Q_cBKONCbj3O7tq-lxhO2paTdCivtc2lG9hL_w5aVHxhH6cz5zUnGqAEcpU0kt2cGPVf5V6DmIU9AOHWaQXNCyh7g4cR2GgmxqdJQA1mQHb0pas6ZW8/s334/Screenshot_2024-04-20_at_4.22.10_PM-removebg-preview.png">
                  {% elif report.rating.capitalize == "Negative" %}
                  <img class="rating_email" style="width: auto; height: 8vh;"
                    src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhD2a2uzprPRdusoiSCTdrF5I6j5T_nY4FD-PU4e62iy0B77leCdAAiBhAcwa5R_p40HiDPkoX0Q_cBKONCbj3O7tq-lxhO2paTdCivtc2lG9hL_w5aVHxhH6cz5zUnGqAEcpU0kt2cGPVf5V6DmIU9AOHWaQXNCyh7g4cR2GgmxqdJQA1mQHb0pas6ZW8/s334/Screenshot_2024-04-20_at_4.22.10_PM-removebg-preview.png">
                  {% else %}
                  <img class="rating_email" style="rotate: -90deg; width: auto; height: 8vh;"
                    src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhD2a2uzprPRdusoiSCTdrF5I6j5T_nY4FD-PU4e62iy0B77leCdAAiBhAcwa5R_p40HiDPkoX0Q_cBKONCbj3O7tq-lxhO2paTdCivtc2lG9hL_w5aVHxhH6cz5zUnGqAEcpU0kt2cGPVf5V6DmIU9AOHWaQXNCyh7g4cR2GgmxqdJQA1mQHb0pas6ZW8/s334/Screenshot_2024-04-20_at_4.22.10_PM-removebg-preview.png">
                  {% endif %}
                </div>
              </div>
            </div>

            <div id="ReportDetails{{report.id}}" class="details"
              style="display: none; width: 40.5vw; height: 400px; border: 0px; border-radius: 5px; background-color: #f0f0f0; margin-bottom: 1vh;">
              <p style="padding-left: 5px; font-weight: bold;">Report: </p>
              <p style="padding-left: 5px;">{{ report.report.capitalize }}</p>
              <iframe id="display{{report.id}}" src="{{report.fileLink}}" overflow="hidden" frameborder="0" width="500"
                height="600" scrolling="yes"></iframe>
            </div>

            <button class="expandcollapse"
              style="width: 40.5vw; background-color: #f0f0f0; border: 0; border-radius: 5px;"
              onclick="expand('{{report.id}}')">
              <div style="display: flex; flex-direction: column; align-items: center;">
                <p id="ExpandCollapse{{report.id}}"
                  style="color: black; font-size: 16px; font-weight: 500; margin-bottom: 0px;">Expand</p>
                <img id="arrowImage{{report.id}}" style="width: 10px; height: 10px;"
                  src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgKGLwTli8VHpuuB3u5LaCu-QTpe72EJve82FaYifyyDP3GXWKXd8GPaE5y-9zWbd8IQ-I1_445V1R6_oiX1GyKQpQ9_GgTvcj4n4AlBYHp5wu8KLcJWAxrXBAEVzaZHllHBxxJg_s5JlSE_gb9PkWqdgH_LC-o540HfhvARpnZdiUeO24sZP5PEOPZerk/s512/arrow.png">
              </div>
            </button>
          </div>
        </div>
      </div>
      {% empty %}
      <p>No reports submitted.</p>
      {% endfor %}
    </div>
  </div>
  <script>
    function expand(reportId) {
      var details = document.getElementById("ReportDetails" + reportId);
      var button = document.getElementById("ExpandCollapse" + reportId);
      var image = document.getElementById("arrowImage" + reportId);
      var report_card = document.getElementById("report_card" + reportId)

      if (details.style.display === "none" || details.style.display === "") {
        details.style.display = "block";
        button.textContent = "Collapse";
        image.style.transform = "rotate(180deg)";
        report_card.style.height = "calc(57vh + 410px)";
      }

      else {
        details.style.display = "none";
        button.textContent = "Expand";
        image.style.transform = "rotate(0deg)";
        report_card.style.height = "57vh";
      }
    }

    document.addEventListener('DOMContentLoaded', function () {
        var PublicReports = document.getElementById('PublicReports');
        var Public = document.getElementById('Public');
        if (PublicReports) {
          PublicReports.style.backgroundColor = 'rgb(242, 204, 143)';
          Public.style.height = '90px';
          PublicReports.style.width = '120px';
          PublicReports.style.transform = 'translateY(0px)';
          PublicReports.style.borderBottomLeftRadius = '8px';
          PublicReports.style.borderBottomRightRadius = '8px';
          Public.style.boxShadow = '0px 6px 10px rgba(0, 0, 0, 0.65)';
          Public.style.borderBottomLeftRadius = '8px';
          Public.style.borderBottomRightRadius = '8px';
        }
      });
  </script>
</body>

</html>

<!-- <!DOCTYPE html>
{% load socialaccount %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
  integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <style>
    body {
        font-family: 'Lato', sans-serif;
    }
    </style>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap">

  <html lang="en">
{% include 'login/user_navbar.html' %}
<style>
  .expand-button {
    background-color: rgb(150, 150, 255);
    color: rgb(45, 45, 45);
    border: 0px;
    border-radius: 5px;
  }
</style>

<body style="margin-top: 120px;">
  <div class="container mt-5">
    <div class="d-flex justify-content-center">
      <form method="post">
        {% csrf_token %}
        <input type="text" id="search" name="search">
        <input type="submit" id="search_button" name="search_button" value="search">
      </form>
    </div>
    <br/>
    <div class="row row-cols-1 row-cols-md-2 g-4">
      {% for report in reports %}
      <div class="col">
        <div class="card" style="background-color: #ccc">
          <h5 class="card-title" style="padding:7px; padding-left:15px">{{report.studentName.capitalize}}</h5>
          <div class="card-body" style="background-color:whitesmoke">
            <p class="card-text">
              Report submitted by {{ report.userID }} <br>
              {{report.className}} taught by {{report.professorName.capitalize}}<br>
              Rating: {{report.rating.capitalize}}<br>
              Assignment Type: {{report.workType.capitalize}}<br>
              <span id="expand{{report.id}}" style="display:none">
                User Testimonial: {{report.report}}<br>
                <div class="embed-responsive embed-responsive-4by3">
                  <iframe class="embed-responsive-item" id="evidence{{report.id}}" src="{{ report.fileLink}}"
                    style="display:none"></iframe>
                </div>
              </span>
              <li><a href="/publicreports/{{report.pk}}/">View Report #{{ report.pk }}</a></li>
            </p>
            <button onclick="expand('{{report.id}}')" id="reportButton{{report.id}}"
              class="expand-button">Expand</button>
          </div>
        </div>
      </div>
      {% empty %}
      <p>No public reports available</p>
      {% endfor %}
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
        var PublicReports = document.getElementById('PublicReports');
        var Public = document.getElementById('Public');
        if (PublicReports) {
          PublicReports.style.backgroundColor = 'rgb(242, 204, 143)';
          Public.style.height = '90px';
          PublicReports.style.width = '120px';
          PublicReports.style.transform = 'translateY(0px)';
          PublicReports.style.borderBottomLeftRadius = '8px';
          PublicReports.style.borderBottomRightRadius = '8px';
          Public.style.boxShadow = '0px 6px 10px rgba(0, 0, 0, 0.65)';
          Public.style.borderBottomLeftRadius = '8px';
          Public.style.borderBottomRightRadius = '8px';
        }
      });

    function expand(name) {
      var testimonial = document.getElementById("expand" + name);
      var buttonText = document.getElementById("reportButton" + name);
      var evidence = document.getElementById("evidence" + name);

      if (testimonial.style.display === "none") {
        buttonText.innerHTML = "Collapse";
        testimonial.style.display = "inline";
        evidence.style.display = "inline";
      }

      else {
        buttonText.innerHTML = "Expand";
        testimonial.style.display = "none";
        evidence.style.display = "none";
      }
    }
  </script>
</body>

</html> -->
